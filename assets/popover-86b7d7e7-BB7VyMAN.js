import{ex as N,eC as $,ct as z,eD as S}from"./index-68a96ec8-w6mglUnj.js";import{h as j,i as D}from"./index-DMcUoX-y.js";import{d as F,J as c,a as h,b as G,O as f,o as p,w as v,e as m,u as e,B as M,N as O,c as b,g as U,t as A,M as q,f as C,G as I}from"./app-Dt_DNYRN.js";const J={key:0,class:"module-popover-loading"},L={class:"ellipsis"},R=F({__name:"popover",props:{modelValue:{default:null},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},loading:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(t,{emit:K}){var k;const i=((k=$("lang"))==null?void 0:k.name)==="zh-cn",a=t,P=K,_=c(),w=h(()=>Object.assign(_.props||{},{label:a.labelKey,value:a.valueKey})),s=h({get:()=>a.modelValue,set:l=>{P("update:modelValue",l)}}),x=h(()=>{try{return Array.isArray(a.options)&&a.options.length===0?c().placeholder||(i?"请选择":"Please select"):B()||c().placeholder||(i?"请选择":"Please select")}catch(l){return console.warn(l),c().placeholder||(i?"请选择":"Please select")}}),B=()=>{const{options:l=[],valueKey:o="id",labelKey:g="name"}=a,r=s.value,E=Array.isArray(r)?r.flat(1/0):[r],V=n=>n.reduce((y,d)=>(y.push(d),Array.isArray(d.children)&&d.children.length&&y.push(...V(d.children)),y),[]),u=V(l).filter(n=>E.includes(n[o])).map(n=>n[g]);return u.length?`${u.join(" | ")}${u.length>5?` +${u.length}`:""}`:""};return(l,o)=>{const g=G("el-icon");return p(),f(e(D),I({trigger:"click",disabled:t.loading},l.$attrs,{"popper-style":{padding:0},width:"auto"}),{reference:v(()=>[m("span",{class:O([{"module-popover-active":e(s)},"module-popover-context"])},[t.loading?(p(),b("span",J,[U(A(i?"正在加载":"Loading...")+" ",1),o[1]||(o[1]=m("i",{class:"el-icon-loading"},null,-1))])):(p(),b(q,{key:1},[m("span",L,A(e(x)),1),C(g,null,{default:v(()=>[C(e(S))]),_:1})],64))],2)]),default:v(()=>[m("div",null,[t.options.length===0?(p(),f(e(j),{key:0,"image-size":60})):(p(),f(e(z),{key:1,options:t.options,props:e(w),modelValue:e(s),"onUpdate:modelValue":o[0]||(o[0]=r=>M(s)?s.value=r:null)},null,8,["options","props","modelValue"]))])]),_:1},16,["disabled"])}}}),Q=N(R,[["__file","/home/runner/work/element-plus-formkit/element-plus-formkit/src/modules/popover.vue"]]);export{Q as default};
