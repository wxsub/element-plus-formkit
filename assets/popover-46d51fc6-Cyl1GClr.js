import{cN as N,cT as U,cU as $}from"./index-4f864229-DI9B7-8I.js";import{h as j,i as z}from"./index-BvboQ4bk.js";import{E as S}from"./index-5ojCauew.js";import{d as T,a2 as c,a as f,b as q,K as h,o as p,w as v,e as m,u as e,B as D,N as F,c as b,g as G,t as A,U as L,f as K,G as M}from"./app-DKigqHQc.js";import"./strings-pxmnbLwI.js";import"./index-DeIJ5zhc.js";import"./index-BC0jWrnm.js";import"./isEqual-BOXqxCM9.js";import"./index-X4VCrN32.js";const O={key:0,class:"module-popover-loading"},R={class:"ellipsis"},Z=T({__name:"popover",props:{modelValue:{default:null},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},loading:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(t,{emit:E}){var k;const i=((k=U("lang"))==null?void 0:k.name)==="zh-cn",a=t,P=E,_=c(),w=f(()=>Object.assign(_.props||{},{label:a.labelKey,value:a.valueKey})),s=f({get:()=>a.modelValue,set:l=>{P("update:modelValue",l)}}),B=f(()=>{try{return Array.isArray(a.options)&&a.options.length===0?c().placeholder||(i?"请选择":"Please select"):C()||c().placeholder||(i?"请选择":"Please select")}catch(l){return console.warn(l),c().placeholder||(i?"请选择":"Please select")}}),C=()=>{const{options:l=[],valueKey:o="id",labelKey:g="name"}=a,r=s.value,x=Array.isArray(r)?r.flat(1/0):[r],V=n=>n.reduce((y,d)=>(y.push(d),Array.isArray(d.children)&&d.children.length&&y.push(...V(d.children)),y),[]),u=V(l).filter(n=>x.includes(n[o])).map(n=>n[g]);return u.length?`${u.join(" | ")}${u.length>5?` +${u.length}`:""}`:""};return(l,o)=>{const g=q("el-icon");return p(),h(e(z),M({trigger:"click",disabled:t.loading},l.$attrs,{"popper-style":{padding:0},width:"auto"}),{reference:v(()=>[m("span",{class:F([{"module-popover-active":e(s)},"module-popover-context"])},[t.loading?(p(),b("span",O,[G(A(i?"正在加载":"Loading...")+" ",1),o[1]||(o[1]=m("i",{class:"el-icon-loading"},null,-1))])):(p(),b(L,{key:1},[m("span",R,A(e(B)),1),K(g,null,{default:v(()=>[K(e($))]),_:1})],64))],2)]),default:v(()=>[m("div",null,[t.options.length===0?(p(),h(e(j),{key:0,"image-size":60})):(p(),h(e(S),{key:1,options:t.options,props:e(w),modelValue:e(s),"onUpdate:modelValue":o[0]||(o[0]=r=>D(s)?s.value=r:null)},null,8,["options","props","modelValue"]))])]),_:1},16,["disabled"])}}}),ae=N(Z,[["__file","/home/runner/work/element-plus-formkit/element-plus-formkit/src/modules/popover.vue"]]);export{ae as default};
