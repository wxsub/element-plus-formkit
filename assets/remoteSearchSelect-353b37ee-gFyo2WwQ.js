import{es as g}from"./index-8684d22f-DPTaXNIo.js";import{E as V,c as k}from"./index-DOP5Lvuv.js";import{d as b,r as c,a as w,O as p,x as C,o as d,aa as K,a8 as f,w as y,c as A,M as F,u as o,G as O,B as _,F as B,ag as E,ah as P}from"./app-CDhIi3XK.js";const $=b({__name:"remoteSearchSelect",props:{labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},initialValue:{default:null},placeholder:{type:String,default:"请输入"},modelValue:{type:[String,Number,Array]},onChoose:{type:[Function,null],default:null},handler:{type:[Function,null],default:null},requester:{type:[Function,null],default:null}},emits:["update:modelValue"],setup(u,{emit:h}){const l=u,v=h,r=c([]),s=c(!1),n=w({get:()=>l.modelValue||null,set:e=>{v("update:modelValue",e)}}),m=async e=>{if(e&&l.requester){s.value=!0;const a=await l.requester(e);s.value=!1,r.value=l.handler?l.handler(a):Array.isArray(a)?a:[]}else r.value=[]},S=e=>{try{if(l.onChoose){const a=Array.isArray(e)?r.value.filter(t=>e.includes(t[l.valueKey])):r.value.find(t=>t[l.valueKey]===e);a&&l.onChoose(a)}}catch(a){console.warn("remoteSearchSelect module onChoose error:",a)}};return C(()=>l.initialValue,e=>{Object.prototype.hasOwnProperty.call(l,"initialValue")&&m(e)},{immediate:!0}),(e,a)=>(d(),p(o(k),O({modelValue:o(n),"onUpdate:modelValue":a[0]||(a[0]=t=>_(n)?n.value=t:null),filterable:"",remote:"","reserve-keyword":"",placeholder:u.placeholder,onChange:S,"remote-method":m,loading:o(s)},e.$attrs),K({default:y(()=>[(d(!0),A(F,null,f(o(r),(t,i)=>(d(),p(o(V),{key:i,label:t[u.labelKey],value:t[u.valueKey]},null,8,["label","value"]))),128))]),_:2},[f(Object.keys(e.$slots),t=>({name:t,fn:y(i=>[B(e.$slots,t,E(P(i)))])}))]),1040,["modelValue","placeholder","loading"]))}}),z=g($,[["__file","/home/runner/work/element-plus-formkit/element-plus-formkit/src/modules/remoteSearchSelect.vue"]]);export{z as default};
