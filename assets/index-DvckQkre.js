import{d as Be,a2 as ea,r as c,a as r,x as I,y as aa,K as S,o as i,w as p,L,S as U,f as x,u as l,B as ta,F as W,O as _e,N as v,c as y,U as ie,a1 as ue,e as D,t as F,M as la,a3 as sa,a0 as ce,ac as oa,af as na,z}from"./app-CB-WXOyX.js";import{E as ra,G as ia,aB as ua,H as q,as as ca,_ as pa,I as Pe,ab as da,av as fa,aD as va,aw as ga,aA as ha,a3 as ma,an as ba,ai as Ca,W as pe,bn as ya,aC as ka,ay as Ea,ap as m,cQ as Ta,cR as wa,cS as Sa,V as _a,P as Pa}from"./index-a49ef40b-DNyLbe3m.js";import{b as Va,a as xa,E as Na}from"./index-TYv_9w9m.js";import{E as $a}from"./index-CMe1whxG.js";import{b as Ba,d as Ia,E as Ve,c as xe}from"./strings-Btc2sxKj.js";import{t as Ne,E as $e,C as Da}from"./index-BZq02cmv.js";import{C as Ie,U as De}from"./index-Ch403G7d.js";import{a as Fa}from"./index-DTDse-m3.js";const za=ia({...Va,size:ca,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:q(Function),default:(u,G)=>u.text.includes(G)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:q(Function),default:()=>!0},placement:{type:q(String),values:Ia,default:"bottom-start"},fallbackPlacements:{type:q(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ba.teleported,tagType:{...Ne.type,default:"info"},tagEffect:{...Ne.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...ua}),Ma={[De]:u=>!0,[Ie]:u=>!0,focus:u=>u instanceof FocusEvent,blur:u=>u instanceof FocusEvent,clear:()=>!0,visibleChange:u=>ra(u),expandChange:u=>!!u,removeTag:u=>!!u},Aa="ElCascader",Ha=Be({name:Aa}),Ka=Be({...Ha,props:za,emits:Ma,setup(u,{expose:G,emit:k}){const o=u,Fe={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:t}=e;["right","left","bottom","top"].includes(t)||a.arrow&&(a.arrow.x=35)},requires:["arrow"]}]},de=ea();let N=0,Q=0;const n=Pe("cascader"),j=Pe("input"),{t:fe}=da(),{form:ve,formItem:M}=fa(),{valueOnClear:ze}=va(o),{isComposing:ge,handleComposition:V}=Fa({afterComposition(e){var a;const t=(a=e.target)==null?void 0:a.value;re(t)}}),J=c(null),$=c(null),he=c(null),f=c(null),A=c(null),g=c(!1),X=c(!1),E=c(!1),Y=c(!1),H=c(""),_=c(""),P=c([]),Z=c([]),ee=c([]),Me=r(()=>de.style),T=r(()=>o.disabled||(ve==null?void 0:ve.disabled)),me=r(()=>{var e;return(e=o.placeholder)!=null?e:fe("el.cascader.placeholder")}),Ae=r(()=>_.value||P.value.length>0||ge.value?"":me.value),K=ga(),be=r(()=>K.value==="small"?"small":"default"),w=r(()=>!!o.props.multiple),Ce=r(()=>!o.filterable||w.value),ye=r(()=>w.value?_.value:H.value),O=r(()=>{var e;return((e=f.value)==null?void 0:e.checkedNodes)||[]}),He=r(()=>!o.clearable||T.value||E.value||!X.value?!1:!!O.value.length),R=r(()=>{const{showAllLevels:e,separator:a}=o,t=O.value;return t.length?w.value?"":t[0].calcText(e,a):""}),Ke=r(()=>(M==null?void 0:M.validateState)||""),ae=r({get(){return xa(o.modelValue)},set(e){const a=e??ze.value;k(De,a),k(Ie,a),o.validateEvent&&(M==null||M.validate("change").catch(t=>ha()))}}),Oe=r(()=>[n.b(),n.m(K.value),n.is("disabled",T.value),de.class]),Re=r(()=>[j.e("icon"),"icon-arrow-down",n.is("reverse",g.value)]),Le=r(()=>n.is("focus",g.value||Y.value)),ke=r(()=>{var e,a;return(a=(e=J.value)==null?void 0:e.popperRef)==null?void 0:a.contentRef}),d=e=>{var a,t,s;T.value||(e=e??!g.value,e!==g.value&&(g.value=e,(t=(a=$.value)==null?void 0:a.input)==null||t.setAttribute("aria-expanded",`${e}`),e?(B(),z((s=f.value)==null?void 0:s.scrollToExpandingNode)):o.filterable&&ne(),k("visibleChange",e)))},B=()=>{z(()=>{var e;(e=J.value)==null||e.updatePopper()})},te=()=>{E.value=!1},le=e=>{const{showAllLevels:a,separator:t}=o;return{node:e,key:e.uid,text:e.calcText(a,t),hitState:!1,closable:!T.value&&!e.isDisabled,isCollapseTag:!1}},se=e=>{var a;const t=e.node;t.doCheck(!1),(a=f.value)==null||a.calculateCheckedValue(),k("removeTag",t.valueByOption)},Ue=()=>{if(!w.value)return;const e=O.value,a=[],t=[];if(e.forEach(s=>t.push(le(s))),Z.value=t,e.length){e.slice(0,o.maxCollapseTags).forEach(h=>a.push(le(h)));const s=e.slice(o.maxCollapseTags),b=s.length;b&&(o.collapseTags?a.push({key:-1,text:`+ ${b}`,closable:!1,isCollapseTag:!0}):s.forEach(h=>a.push(le(h))))}P.value=a},Ee=()=>{var e,a;const{filterMethod:t,showAllLevels:s,separator:b}=o,h=(a=(e=f.value)==null?void 0:e.getFlattedNodes(!o.props.checkStrictly))==null?void 0:a.filter(C=>C.isDisabled?!1:(C.calcText(s,b),t(C,ye.value)));w.value&&(P.value.forEach(C=>{C.hitState=!1}),Z.value.forEach(C=>{C.hitState=!1})),E.value=!0,ee.value=h,B()},We=()=>{var e;let a;E.value&&A.value?a=A.value.$el.querySelector(`.${n.e("suggestion-item")}`):a=(e=f.value)==null?void 0:e.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`),a&&(a.focus(),!E.value&&a.click())},oe=()=>{var e,a;const t=(e=$.value)==null?void 0:e.input,s=he.value,b=(a=A.value)==null?void 0:a.$el;if(!(!_a||!t)){if(b){const h=b.querySelector(`.${n.e("suggestion-list")}`);h.style.minWidth=`${t.offsetWidth}px`}if(s){const{offsetHeight:h}=s,C=P.value.length>0?`${Math.max(h,N)-2}px`:`${N}px`;t.style.height=C,B()}}},qe=e=>{var a;return(a=f.value)==null?void 0:a.getCheckedNodes(e)},Ge=e=>{B(),k("expandChange",e)},Qe=e=>{if(!ge.value)switch(e.code){case m.enter:case m.numpadEnter:d();break;case m.down:d(!0),z(We),e.preventDefault();break;case m.esc:g.value===!0&&(e.preventDefault(),e.stopPropagation(),d(!1));break;case m.tab:d(!1);break}},je=()=>{var e;(e=f.value)==null||e.clearCheckedNodes(),!g.value&&o.filterable&&ne(),d(!1),k("clear")},ne=()=>{const{value:e}=R;H.value=e,_.value=e},Je=e=>{var a,t;const{checked:s}=e;w.value?(a=f.value)==null||a.handleCheckChange(e,!s,!1):(!s&&((t=f.value)==null||t.handleCheckChange(e,!0,!1)),d(!1))},Xe=e=>{const a=e.target,{code:t}=e;switch(t){case m.up:case m.down:{e.preventDefault();const s=t===m.up?-1:1;Ta(wa(a,s,`.${n.e("suggestion-item")}[tabindex="-1"]`));break}case m.enter:case m.numpadEnter:a.click();break}},Ye=()=>{const e=P.value,a=e[e.length-1];Q=_.value?0:Q+1,!(!a||!Q||o.collapseTags&&e.length>1)&&(a.hitState?se(a):a.hitState=!0)},Te=e=>{const a=e.target,t=n.e("search-input");a.className===t&&(Y.value=!0),k("focus",e)},we=e=>{Y.value=!1,k("blur",e)},Ze=ma(()=>{const{value:e}=ye;if(!e)return;const a=o.beforeFilter(e);ba(a)?a.then(Ee).catch(()=>{}):a!==!1?Ee():te()},o.debounce),re=(e,a)=>{!g.value&&d(!0),!(a!=null&&a.isComposing)&&(e?Ze():te())},Se=e=>Number.parseFloat(Sa(j.cssVarName("input-height"),e).value)-2;return I(E,B),I([O,T,()=>o.collapseTags],Ue),I(P,()=>{z(()=>oe())}),I(K,async()=>{await z();const e=$.value.input;N=Se(e)||N,oe()}),I(R,ne,{immediate:!0}),aa(()=>{const e=$.value.input,a=Se(e);N=e.offsetHeight||a,Ca(e,oe)}),G({getCheckedNodes:qe,cascaderPanelRef:f,togglePopperVisible:d,contentRef:ke,presentText:R}),(e,a)=>(i(),S(l(xe),{ref_key:"tooltipRef",ref:J,visible:g.value,teleported:e.teleported,"popper-class":[l(n).e("dropdown"),e.popperClass],"popper-options":Fe,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${l(n).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:e.persistent,onHide:te},{default:p(()=>[L((i(),y("div",{class:v(l(Oe)),style:la(l(Me)),onClick:()=>d(l(Ce)?void 0:!0),onKeydown:Qe,onMouseenter:t=>X.value=!0,onMouseleave:t=>X.value=!1},[x(l($a),{ref_key:"input",ref:$,modelValue:H.value,"onUpdate:modelValue":t=>H.value=t,placeholder:l(Ae),readonly:l(Ce),disabled:l(T),"validate-event":!1,size:l(K),class:v(l(Le)),tabindex:l(w)&&e.filterable&&!l(T)?-1:void 0,onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we,onInput:re},sa({suffix:p(()=>[l(He)?(i(),S(l(pe),{key:"clear",class:v([l(j).e("icon"),"icon-circle-close"]),onClick:ce(je,["stop"])},{default:p(()=>[x(l(ka))]),_:1},8,["class","onClick"])):(i(),S(l(pe),{key:"arrow-down",class:v(l(Re)),onClick:ce(t=>d(),["stop"])},{default:p(()=>[x(l(Ea))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:p(()=>[W(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),l(w)?(i(),y("div",{key:0,ref_key:"tagWrapper",ref:he,class:v([l(n).e("tags"),l(n).is("validate",!!l(Ke))])},[(i(!0),y(ie,null,ue(P.value,t=>(i(),S(l($e),{key:t.key,type:e.tagType,size:l(be),effect:e.tagEffect,hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:s=>se(t)},{default:p(()=>[t.isCollapseTag===!1?(i(),y("span",{key:0},F(t.text),1)):(i(),S(l(xe),{key:1,disabled:g.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:p(()=>[D("span",null,F(t.text),1)]),content:p(()=>[x(l(Ve),{"max-height":e.maxCollapseTagsTooltipHeight},{default:p(()=>[D("div",{class:v(l(n).e("collapse-tags"))},[(i(!0),y(ie,null,ue(Z.value.slice(e.maxCollapseTags),(s,b)=>(i(),y("div",{key:b,class:v(l(n).e("collapse-tag"))},[(i(),S(l($e),{key:s.key,class:"in-tooltip",type:e.tagType,size:l(be),effect:e.tagEffect,hit:s.hitState,closable:s.closable,"disable-transitions":"",onClose:h=>se(s)},{default:p(()=>[D("span",null,F(s.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),e.filterable&&!l(T)?L((i(),y("input",{key:0,"onUpdate:modelValue":t=>_.value=t,type:"text",class:v(l(n).e("search-input")),placeholder:l(R)?"":l(me),onInput:t=>re(_.value,t),onClick:ce(t=>d(!0),["stop"]),onKeydown:oa(Ye,["delete"]),onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[na,_.value]]):U("v-if",!0)],2)):U("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[l(Da),()=>d(!1),l(ke)]])]),content:p(()=>[L(x(l(Na),{ref_key:"cascaderPanelRef",ref:f,modelValue:l(ae),"onUpdate:modelValue":t=>ta(ae)?ae.value=t:null,options:e.options,props:o.props,border:!1,"render-label":e.$slots.default,onExpandChange:Ge,onClose:t=>e.$nextTick(()=>d(!1))},{empty:p(()=>[W(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[_e,!E.value]]),e.filterable?L((i(),S(l(Ve),{key:0,ref_key:"suggestionPanel",ref:A,tag:"ul",class:v(l(n).e("suggestion-panel")),"view-class":l(n).e("suggestion-list"),onKeydown:Xe},{default:p(()=>[ee.value.length?(i(!0),y(ie,{key:0},ue(ee.value,t=>(i(),y("li",{key:t.uid,class:v([l(n).e("suggestion-item"),l(n).is("checked",t.checked)]),tabindex:-1,onClick:s=>Je(t)},[W(e.$slots,"suggestion-item",{item:t},()=>[D("span",null,F(t.text),1),t.checked?(i(),S(l(pe),{key:0},{default:p(()=>[x(l(ya))]),_:1})):U("v-if",!0)])],10,["onClick"]))),128)):W(e.$slots,"empty",{key:1},()=>[D("li",{class:v(l(n).e("empty-text"))},F(l(fe)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[_e,E.value]]):U("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Oa=pa(Ka,[["__file","cascader.vue"]]);const Ja=Pa(Oa);export{Ja as E,za as a,Ma as c};
