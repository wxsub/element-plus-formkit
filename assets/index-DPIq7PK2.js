import{d as Be,$ as ea,r as c,a as r,v as I,q as D,p as aa,G as _,o as u,w as p,H as U,O as L,f as $,u as l,y as ta,B as q,K as Se,J as v,c as y,P as ue,Z as ie,e as F,t as z,I as la,a0 as sa,Y as ce,ab as oa,ae as na}from"./app-D3qKCy88.js";import{D as ra,F as ua,az as ia,G as W,aq as ca,_ as pa,H as Pe,a9 as da,at as fa,aB as va,au as ga,ay as ha,a1 as ma,al as ba,ag as Ca,U as pe,bl as ya,aA as ka,aw as Ea,R as Ta,an as m,cO as wa,cP as _a,cQ as Sa,O as Pa}from"./index-fcef7efe-CXmS21i_.js";import{b as Va,a as $a,E as xa}from"./index-Bai3ZWJb.js";import{E as Na}from"./index-HVOWCh4r.js";import{b as Ba,d as Ia,E as Ve,c as $e}from"./strings-BOp4_9Li.js";import{t as xe,E as Ne,C as Da}from"./index-DTqBoELR.js";import{C as Ie,U as De}from"./index-C-WET9Xk.js";import{a as Fa}from"./index-CXQ3ri_f.js";const za=ua({...Va,size:ca,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:W(Function),default:(i,G)=>i.text.includes(G)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:W(Function),default:()=>!0},placement:{type:W(String),values:Ia,default:"bottom-start"},fallbackPlacements:{type:W(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ba.teleported,tagType:{...xe.type,default:"info"},tagEffect:{...xe.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...ia}),Ma={[De]:i=>!0,[Ie]:i=>!0,focus:i=>i instanceof FocusEvent,blur:i=>i instanceof FocusEvent,clear:()=>!0,visibleChange:i=>ra(i),expandChange:i=>!!i,removeTag:i=>!!i},Ha="ElCascader",Oa=Be({name:Ha}),Aa=Be({...Oa,props:za,emits:Ma,setup(i,{expose:G,emit:k}){const o=i,Fe={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:t}=e;["right","left","bottom","top"].includes(t)||a.arrow&&(a.arrow.x=35)},requires:["arrow"]}]},de=ea();let x=0,J=0;const n=Pe("cascader"),Q=Pe("input"),{t:fe}=da(),{form:ve,formItem:M}=fa(),{valueOnClear:ze}=va(o),{isComposing:ge,handleComposition:V}=Fa({afterComposition(e){var a;const t=(a=e.target)==null?void 0:a.value;re(t)}}),Y=c(null),N=c(null),he=c(null),f=c(null),H=c(null),g=c(!1),Z=c(!1),E=c(!1),j=c(!1),O=c(""),S=c(""),P=c([]),X=c([]),ee=c([]),Me=r(()=>de.style),T=r(()=>o.disabled||(ve==null?void 0:ve.disabled)),me=r(()=>{var e;return(e=o.placeholder)!=null?e:fe("el.cascader.placeholder")}),He=r(()=>S.value||P.value.length>0||ge.value?"":me.value),A=ga(),be=r(()=>A.value==="small"?"small":"default"),w=r(()=>!!o.props.multiple),Ce=r(()=>!o.filterable||w.value),ye=r(()=>w.value?S.value:O.value),K=r(()=>{var e;return((e=f.value)==null?void 0:e.checkedNodes)||[]}),Oe=r(()=>!o.clearable||T.value||E.value||!Z.value?!1:!!K.value.length),R=r(()=>{const{showAllLevels:e,separator:a}=o,t=K.value;return t.length?w.value?"":t[0].calcText(e,a):""}),Ae=r(()=>(M==null?void 0:M.validateState)||""),ae=r({get(){return $a(o.modelValue)},set(e){const a=e??ze.value;k(De,a),k(Ie,a),o.validateEvent&&(M==null||M.validate("change").catch(t=>ha()))}}),Ke=r(()=>[n.b(),n.m(A.value),n.is("disabled",T.value),de.class]),Re=r(()=>[Q.e("icon"),"icon-arrow-down",n.is("reverse",g.value)]),Ue=r(()=>n.is("focus",g.value||j.value)),ke=r(()=>{var e,a;return(a=(e=Y.value)==null?void 0:e.popperRef)==null?void 0:a.contentRef}),d=e=>{var a,t,s;T.value||(e=e??!g.value,e!==g.value&&(g.value=e,(t=(a=N.value)==null?void 0:a.input)==null||t.setAttribute("aria-expanded",`${e}`),e?(B(),D((s=f.value)==null?void 0:s.scrollToExpandingNode)):o.filterable&&ne(),k("visibleChange",e)))},B=()=>{D(()=>{var e;(e=Y.value)==null||e.updatePopper()})},te=()=>{E.value=!1},le=e=>{const{showAllLevels:a,separator:t}=o;return{node:e,key:e.uid,text:e.calcText(a,t),hitState:!1,closable:!T.value&&!e.isDisabled,isCollapseTag:!1}},se=e=>{var a;const t=e.node;t.doCheck(!1),(a=f.value)==null||a.calculateCheckedValue(),k("removeTag",t.valueByOption)},Le=()=>{if(!w.value)return;const e=K.value,a=[],t=[];if(e.forEach(s=>t.push(le(s))),X.value=t,e.length){e.slice(0,o.maxCollapseTags).forEach(h=>a.push(le(h)));const s=e.slice(o.maxCollapseTags),b=s.length;b&&(o.collapseTags?a.push({key:-1,text:`+ ${b}`,closable:!1,isCollapseTag:!0}):s.forEach(h=>a.push(le(h))))}P.value=a},Ee=()=>{var e,a;const{filterMethod:t,showAllLevels:s,separator:b}=o,h=(a=(e=f.value)==null?void 0:e.getFlattedNodes(!o.props.checkStrictly))==null?void 0:a.filter(C=>C.isDisabled?!1:(C.calcText(s,b),t(C,ye.value)));w.value&&(P.value.forEach(C=>{C.hitState=!1}),X.value.forEach(C=>{C.hitState=!1})),E.value=!0,ee.value=h,B()},qe=()=>{var e;let a;E.value&&H.value?a=H.value.$el.querySelector(`.${n.e("suggestion-item")}`):a=(e=f.value)==null?void 0:e.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`),a&&(a.focus(),!E.value&&a.click())},oe=()=>{var e,a;const t=(e=N.value)==null?void 0:e.input,s=he.value,b=(a=H.value)==null?void 0:a.$el;if(!(!Ta||!t)){if(b){const h=b.querySelector(`.${n.e("suggestion-list")}`);h.style.minWidth=`${t.offsetWidth}px`}if(s){const{offsetHeight:h}=s,C=P.value.length>0?`${Math.max(h,x)-2}px`:`${x}px`;t.style.height=C,B()}}},We=e=>{var a;return(a=f.value)==null?void 0:a.getCheckedNodes(e)},Ge=e=>{B(),k("expandChange",e)},Je=e=>{if(!ge.value)switch(e.code){case m.enter:case m.numpadEnter:d();break;case m.down:d(!0),D(qe),e.preventDefault();break;case m.esc:g.value===!0&&(e.preventDefault(),e.stopPropagation(),d(!1));break;case m.tab:d(!1);break}},Qe=()=>{var e;(e=f.value)==null||e.clearCheckedNodes(),!g.value&&o.filterable&&ne(),d(!1),k("clear")},ne=()=>{const{value:e}=R;O.value=e,S.value=e},Ye=e=>{var a,t;const{checked:s}=e;w.value?(a=f.value)==null||a.handleCheckChange(e,!s,!1):(!s&&((t=f.value)==null||t.handleCheckChange(e,!0,!1)),d(!1))},Ze=e=>{const a=e.target,{code:t}=e;switch(t){case m.up:case m.down:{e.preventDefault();const s=t===m.up?-1:1;wa(_a(a,s,`.${n.e("suggestion-item")}[tabindex="-1"]`));break}case m.enter:case m.numpadEnter:a.click();break}},je=()=>{const e=P.value,a=e[e.length-1];J=S.value?0:J+1,!(!a||!J||o.collapseTags&&e.length>1)&&(a.hitState?se(a):a.hitState=!0)},Te=e=>{const a=e.target,t=n.e("search-input");a.className===t&&(j.value=!0),k("focus",e)},we=e=>{j.value=!1,k("blur",e)},Xe=ma(()=>{const{value:e}=ye;if(!e)return;const a=o.beforeFilter(e);ba(a)?a.then(Ee).catch(()=>{}):a!==!1?Ee():te()},o.debounce),re=(e,a)=>{!g.value&&d(!0),!(a!=null&&a.isComposing)&&(e?Xe():te())},_e=e=>Number.parseFloat(Sa(Q.cssVarName("input-height"),e).value)-2;return I(E,B),I([K,T,()=>o.collapseTags],Le),I(P,()=>{D(()=>oe())}),I(A,async()=>{await D();const e=N.value.input;x=_e(e)||x,oe()}),I(R,ne,{immediate:!0}),aa(()=>{const e=N.value.input,a=_e(e);x=e.offsetHeight||a,Ca(e,oe)}),G({getCheckedNodes:We,cascaderPanelRef:f,togglePopperVisible:d,contentRef:ke,presentText:R}),(e,a)=>(u(),_(l($e),{ref_key:"tooltipRef",ref:Y,visible:g.value,teleported:e.teleported,"popper-class":[l(n).e("dropdown"),e.popperClass],"popper-options":Fe,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${l(n).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:e.persistent,onHide:te},{default:p(()=>[U((u(),y("div",{class:v(l(Ke)),style:la(l(Me)),onClick:()=>d(l(Ce)?void 0:!0),onKeydown:Je,onMouseenter:t=>Z.value=!0,onMouseleave:t=>Z.value=!1},[$(l(Na),{ref_key:"input",ref:N,modelValue:O.value,"onUpdate:modelValue":t=>O.value=t,placeholder:l(He),readonly:l(Ce),disabled:l(T),"validate-event":!1,size:l(A),class:v(l(Ue)),tabindex:l(w)&&e.filterable&&!l(T)?-1:void 0,onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we,onInput:re},sa({suffix:p(()=>[l(Oe)?(u(),_(l(pe),{key:"clear",class:v([l(Q).e("icon"),"icon-circle-close"]),onClick:ce(Qe,["stop"])},{default:p(()=>[$(l(ka))]),_:1},8,["class","onClick"])):(u(),_(l(pe),{key:"arrow-down",class:v(l(Re)),onClick:ce(t=>d(),["stop"])},{default:p(()=>[$(l(Ea))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:p(()=>[q(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),l(w)?(u(),y("div",{key:0,ref_key:"tagWrapper",ref:he,class:v([l(n).e("tags"),l(n).is("validate",!!l(Ae))])},[(u(!0),y(ue,null,ie(P.value,t=>(u(),_(l(Ne),{key:t.key,type:e.tagType,size:l(be),effect:e.tagEffect,hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:s=>se(t)},{default:p(()=>[t.isCollapseTag===!1?(u(),y("span",{key:0},z(t.text),1)):(u(),_(l($e),{key:1,disabled:g.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:p(()=>[F("span",null,z(t.text),1)]),content:p(()=>[$(l(Ve),{"max-height":e.maxCollapseTagsTooltipHeight},{default:p(()=>[F("div",{class:v(l(n).e("collapse-tags"))},[(u(!0),y(ue,null,ie(X.value.slice(e.maxCollapseTags),(s,b)=>(u(),y("div",{key:b,class:v(l(n).e("collapse-tag"))},[(u(),_(l(Ne),{key:s.key,class:"in-tooltip",type:e.tagType,size:l(be),effect:e.tagEffect,hit:s.hitState,closable:s.closable,"disable-transitions":"",onClose:h=>se(s)},{default:p(()=>[F("span",null,z(s.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),e.filterable&&!l(T)?U((u(),y("input",{key:0,"onUpdate:modelValue":t=>S.value=t,type:"text",class:v(l(n).e("search-input")),placeholder:l(R)?"":l(me),onInput:t=>re(S.value,t),onClick:ce(t=>d(!0),["stop"]),onKeydown:oa(je,["delete"]),onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[na,S.value]]):L("v-if",!0)],2)):L("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[l(Da),()=>d(!1),l(ke)]])]),content:p(()=>[U($(l(xa),{ref_key:"cascaderPanelRef",ref:f,modelValue:l(ae),"onUpdate:modelValue":t=>ta(ae)?ae.value=t:null,options:e.options,props:o.props,border:!1,"render-label":e.$slots.default,onExpandChange:Ge,onClose:t=>e.$nextTick(()=>d(!1))},{empty:p(()=>[q(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Se,!E.value]]),e.filterable?U((u(),_(l(Ve),{key:0,ref_key:"suggestionPanel",ref:H,tag:"ul",class:v(l(n).e("suggestion-panel")),"view-class":l(n).e("suggestion-list"),onKeydown:Ze},{default:p(()=>[ee.value.length?(u(!0),y(ue,{key:0},ie(ee.value,t=>(u(),y("li",{key:t.uid,class:v([l(n).e("suggestion-item"),l(n).is("checked",t.checked)]),tabindex:-1,onClick:s=>Ye(t)},[q(e.$slots,"suggestion-item",{item:t},()=>[F("span",null,z(t.text),1),t.checked?(u(),_(l(pe),{key:0},{default:p(()=>[$(l(ya))]),_:1})):L("v-if",!0)])],10,["onClick"]))),128)):q(e.$slots,"empty",{key:1},()=>[F("li",{class:v(l(n).e("empty-text"))},z(l(fe)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Se,E.value]]):L("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Ka=pa(Aa,[["__file","cascader.vue"]]);const Ya=Pa(Ka);export{Ya as E,za as a,Ma as c};
