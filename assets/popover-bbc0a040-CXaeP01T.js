import{cN as N,cT as U,cU as $}from"./index-a99481cd-DJqHn9mE.js";import{h as z,i as S}from"./index-BqeBS4jB.js";import{E as j}from"./index-efguza-8.js";import{d as O,a2 as c,a as f,b as T,K as h,o as p,w as v,e as m,u as e,B as q,N as D,c as b,g as F,t as A,U as G,f as K,G as L}from"./app-TVmh4I3k.js";import"./strings-Dq9DyNAf.js";import"./index-CV0k19YS.js";import"./index-DpnSBycb.js";import"./isEqual-BkIJHoBd.js";import"./index-CwQTYcqZ.js";const M={key:0,class:"module-popover-loading"},R={class:"ellipsis"},Z=O({__name:"popover",props:{modelValue:{default:null},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},loading:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(t,{emit:E}){var k;const i=((k=U("lang"))==null?void 0:k.name)==="zh-cn",a=t,P=E,_=c(),w=f(()=>Object.assign(_.props||{},{label:a.labelKey,value:a.valueKey})),s=f({get:()=>a.modelValue,set:l=>{P("update:modelValue",l)}}),B=f(()=>{try{return Array.isArray(a.options)&&a.options.length===0?c().placeholder||(i?"请选择":"Please select"):C()||c().placeholder||(i?"请选择":"Please select")}catch(l){return console.warn(l),c().placeholder||(i?"请选择":"Please select")}}),C=()=>{const{options:l=[],valueKey:o="id",labelKey:g="name"}=a,r=s.value,x=Array.isArray(r)?r.flat(1/0):[r],V=n=>n.reduce((y,d)=>(y.push(d),Array.isArray(d.children)&&d.children.length&&y.push(...V(d.children)),y),[]),u=V(l).filter(n=>x.includes(n[o])).map(n=>n[g]);return u.length?`${u.join(" | ")}${u.length>5?` +${u.length}`:""}`:""};return(l,o)=>{const g=T("el-icon");return p(),h(e(S),L({trigger:"click",disabled:t.loading},l.$attrs,{"popper-style":{padding:0},width:"auto"}),{reference:v(()=>[m("span",{class:D([{"module-popover-active":e(s)},"module-popover-context"])},[t.loading?(p(),b("span",M,[F(A(i?"正在加载":"Loading...")+" ",1),o[1]||(o[1]=m("i",{class:"el-icon-loading"},null,-1))])):(p(),b(G,{key:1},[m("span",R,A(e(B)),1),K(g,null,{default:v(()=>[K(e($))]),_:1})],64))],2)]),default:v(()=>[m("div",null,[t.options.length===0?(p(),h(e(z),{key:0,"image-size":60})):(p(),h(e(j),{key:1,options:t.options,props:e(w),modelValue:e(s),"onUpdate:modelValue":o[0]||(o[0]=r=>q(s)?s.value=r:null)},null,8,["options","props","modelValue"]))])]),_:1},16,["disabled"])}}}),ae=N(Z,[["__file","/home/runner/work/element-plus-formkit/element-plus-formkit/src/modules/popover.vue"]]);export{ae as default};
