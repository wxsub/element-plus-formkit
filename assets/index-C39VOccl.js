import{d as Be,a1 as ea,r as c,a as r,x as I,y as aa,J as _,o as u,w as p,K as O,R as U,f as x,u as l,B as ta,E as W,N as Se,M as v,c as y,S as ue,a0 as ie,e as z,t as D,L as la,a2 as sa,$ as ce,ab as oa,ae as na,z as F}from"./app-zBuj1REd.js";import{E as ra,G as ua,aA as ia,H as q,ar as ca,_ as pa,I as Pe,aa as da,au as fa,aC as va,av as ha,az as ga,a2 as ma,am as ba,ah as Ca,V as pe,bm as ya,aB as ka,ax as Ea,ao as m,cP as Ta,cQ as wa,cR as _a,U as Sa,P as Pa}from"./index-a49ef40b-CoohSwVZ.js";import{b as Va,a as xa,E as $a}from"./index-CVLgq3nc.js";import{E as Na}from"./index-DIvuYG7I.js";import{b as Ba,d as Ia,E as Ve,c as xe}from"./strings-Dc-u2Z_q.js";import{t as $e,E as Ne,C as za}from"./index-DWMX-MdY.js";import{C as Ie,U as ze}from"./index-B4exuNQu.js";import{a as Da}from"./index-XCmbDL7K.js";const Fa=ua({...Va,size:ca,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:q(Function),default:(i,G)=>i.text.includes(G)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:q(Function),default:()=>!0},placement:{type:q(String),values:Ia,default:"bottom-start"},fallbackPlacements:{type:q(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ba.teleported,tagType:{...$e.type,default:"info"},tagEffect:{...$e.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...ia}),Ma={[ze]:i=>!0,[Ie]:i=>!0,focus:i=>i instanceof FocusEvent,blur:i=>i instanceof FocusEvent,clear:()=>!0,visibleChange:i=>ra(i),expandChange:i=>!!i,removeTag:i=>!!i},Aa="ElCascader",Ha=Be({name:Aa}),Ka=Be({...Ha,props:Fa,emits:Ma,setup(i,{expose:G,emit:k}){const o=i,De={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:t}=e;["right","left","bottom","top"].includes(t)||a.arrow&&(a.arrow.x=35)},requires:["arrow"]}]},de=ea();let $=0,J=0;const n=Pe("cascader"),Q=Pe("input"),{t:fe}=da(),{form:ve,formItem:M}=fa(),{valueOnClear:Fe}=va(o),{isComposing:he,handleComposition:V}=Da({afterComposition(e){var a;const t=(a=e.target)==null?void 0:a.value;re(t)}}),j=c(null),N=c(null),ge=c(null),f=c(null),A=c(null),h=c(!1),X=c(!1),E=c(!1),Y=c(!1),H=c(""),S=c(""),P=c([]),Z=c([]),ee=c([]),Me=r(()=>de.style),T=r(()=>o.disabled||(ve==null?void 0:ve.disabled)),me=r(()=>{var e;return(e=o.placeholder)!=null?e:fe("el.cascader.placeholder")}),Ae=r(()=>S.value||P.value.length>0||he.value?"":me.value),K=ha(),be=r(()=>K.value==="small"?"small":"default"),w=r(()=>!!o.props.multiple),Ce=r(()=>!o.filterable||w.value),ye=r(()=>w.value?S.value:H.value),R=r(()=>{var e;return((e=f.value)==null?void 0:e.checkedNodes)||[]}),He=r(()=>!o.clearable||T.value||E.value||!X.value?!1:!!R.value.length),L=r(()=>{const{showAllLevels:e,separator:a}=o,t=R.value;return t.length?w.value?"":t[0].calcText(e,a):""}),Ke=r(()=>(M==null?void 0:M.validateState)||""),ae=r({get(){return xa(o.modelValue)},set(e){const a=e??Fe.value;k(ze,a),k(Ie,a),o.validateEvent&&(M==null||M.validate("change").catch(t=>ga()))}}),Re=r(()=>[n.b(),n.m(K.value),n.is("disabled",T.value),de.class]),Le=r(()=>[Q.e("icon"),"icon-arrow-down",n.is("reverse",h.value)]),Oe=r(()=>n.is("focus",h.value||Y.value)),ke=r(()=>{var e,a;return(a=(e=j.value)==null?void 0:e.popperRef)==null?void 0:a.contentRef}),d=e=>{var a,t,s;T.value||(e=e??!h.value,e!==h.value&&(h.value=e,(t=(a=N.value)==null?void 0:a.input)==null||t.setAttribute("aria-expanded",`${e}`),e?(B(),F((s=f.value)==null?void 0:s.scrollToExpandingNode)):o.filterable&&ne(),k("visibleChange",e)))},B=()=>{F(()=>{var e;(e=j.value)==null||e.updatePopper()})},te=()=>{E.value=!1},le=e=>{const{showAllLevels:a,separator:t}=o;return{node:e,key:e.uid,text:e.calcText(a,t),hitState:!1,closable:!T.value&&!e.isDisabled,isCollapseTag:!1}},se=e=>{var a;const t=e.node;t.doCheck(!1),(a=f.value)==null||a.calculateCheckedValue(),k("removeTag",t.valueByOption)},Ue=()=>{if(!w.value)return;const e=R.value,a=[],t=[];if(e.forEach(s=>t.push(le(s))),Z.value=t,e.length){e.slice(0,o.maxCollapseTags).forEach(g=>a.push(le(g)));const s=e.slice(o.maxCollapseTags),b=s.length;b&&(o.collapseTags?a.push({key:-1,text:`+ ${b}`,closable:!1,isCollapseTag:!0}):s.forEach(g=>a.push(le(g))))}P.value=a},Ee=()=>{var e,a;const{filterMethod:t,showAllLevels:s,separator:b}=o,g=(a=(e=f.value)==null?void 0:e.getFlattedNodes(!o.props.checkStrictly))==null?void 0:a.filter(C=>C.isDisabled?!1:(C.calcText(s,b),t(C,ye.value)));w.value&&(P.value.forEach(C=>{C.hitState=!1}),Z.value.forEach(C=>{C.hitState=!1})),E.value=!0,ee.value=g,B()},We=()=>{var e;let a;E.value&&A.value?a=A.value.$el.querySelector(`.${n.e("suggestion-item")}`):a=(e=f.value)==null?void 0:e.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`),a&&(a.focus(),!E.value&&a.click())},oe=()=>{var e,a;const t=(e=N.value)==null?void 0:e.input,s=ge.value,b=(a=A.value)==null?void 0:a.$el;if(!(!Sa||!t)){if(b){const g=b.querySelector(`.${n.e("suggestion-list")}`);g.style.minWidth=`${t.offsetWidth}px`}if(s){const{offsetHeight:g}=s,C=P.value.length>0?`${Math.max(g,$)-2}px`:`${$}px`;t.style.height=C,B()}}},qe=e=>{var a;return(a=f.value)==null?void 0:a.getCheckedNodes(e)},Ge=e=>{B(),k("expandChange",e)},Je=e=>{if(!he.value)switch(e.code){case m.enter:case m.numpadEnter:d();break;case m.down:d(!0),F(We),e.preventDefault();break;case m.esc:h.value===!0&&(e.preventDefault(),e.stopPropagation(),d(!1));break;case m.tab:d(!1);break}},Qe=()=>{var e;(e=f.value)==null||e.clearCheckedNodes(),!h.value&&o.filterable&&ne(),d(!1),k("clear")},ne=()=>{const{value:e}=L;H.value=e,S.value=e},je=e=>{var a,t;const{checked:s}=e;w.value?(a=f.value)==null||a.handleCheckChange(e,!s,!1):(!s&&((t=f.value)==null||t.handleCheckChange(e,!0,!1)),d(!1))},Xe=e=>{const a=e.target,{code:t}=e;switch(t){case m.up:case m.down:{e.preventDefault();const s=t===m.up?-1:1;Ta(wa(a,s,`.${n.e("suggestion-item")}[tabindex="-1"]`));break}case m.enter:case m.numpadEnter:a.click();break}},Ye=()=>{const e=P.value,a=e[e.length-1];J=S.value?0:J+1,!(!a||!J||o.collapseTags&&e.length>1)&&(a.hitState?se(a):a.hitState=!0)},Te=e=>{const a=e.target,t=n.e("search-input");a.className===t&&(Y.value=!0),k("focus",e)},we=e=>{Y.value=!1,k("blur",e)},Ze=ma(()=>{const{value:e}=ye;if(!e)return;const a=o.beforeFilter(e);ba(a)?a.then(Ee).catch(()=>{}):a!==!1?Ee():te()},o.debounce),re=(e,a)=>{!h.value&&d(!0),!(a!=null&&a.isComposing)&&(e?Ze():te())},_e=e=>Number.parseFloat(_a(Q.cssVarName("input-height"),e).value)-2;return I(E,B),I([R,T,()=>o.collapseTags],Ue),I(P,()=>{F(()=>oe())}),I(K,async()=>{await F();const e=N.value.input;$=_e(e)||$,oe()}),I(L,ne,{immediate:!0}),aa(()=>{const e=N.value.input,a=_e(e);$=e.offsetHeight||a,Ca(e,oe)}),G({getCheckedNodes:qe,cascaderPanelRef:f,togglePopperVisible:d,contentRef:ke,presentText:L}),(e,a)=>(u(),_(l(xe),{ref_key:"tooltipRef",ref:j,visible:h.value,teleported:e.teleported,"popper-class":[l(n).e("dropdown"),e.popperClass],"popper-options":De,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${l(n).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:e.persistent,onHide:te},{default:p(()=>[O((u(),y("div",{class:v(l(Re)),style:la(l(Me)),onClick:()=>d(l(Ce)?void 0:!0),onKeydown:Je,onMouseenter:t=>X.value=!0,onMouseleave:t=>X.value=!1},[x(l(Na),{ref_key:"input",ref:N,modelValue:H.value,"onUpdate:modelValue":t=>H.value=t,placeholder:l(Ae),readonly:l(Ce),disabled:l(T),"validate-event":!1,size:l(K),class:v(l(Oe)),tabindex:l(w)&&e.filterable&&!l(T)?-1:void 0,onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we,onInput:re},sa({suffix:p(()=>[l(He)?(u(),_(l(pe),{key:"clear",class:v([l(Q).e("icon"),"icon-circle-close"]),onClick:ce(Qe,["stop"])},{default:p(()=>[x(l(ka))]),_:1},8,["class","onClick"])):(u(),_(l(pe),{key:"arrow-down",class:v(l(Le)),onClick:ce(t=>d(),["stop"])},{default:p(()=>[x(l(Ea))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:p(()=>[W(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),l(w)?(u(),y("div",{key:0,ref_key:"tagWrapper",ref:ge,class:v([l(n).e("tags"),l(n).is("validate",!!l(Ke))])},[(u(!0),y(ue,null,ie(P.value,t=>(u(),_(l(Ne),{key:t.key,type:e.tagType,size:l(be),effect:e.tagEffect,hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:s=>se(t)},{default:p(()=>[t.isCollapseTag===!1?(u(),y("span",{key:0},D(t.text),1)):(u(),_(l(xe),{key:1,disabled:h.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:p(()=>[z("span",null,D(t.text),1)]),content:p(()=>[x(l(Ve),{"max-height":e.maxCollapseTagsTooltipHeight},{default:p(()=>[z("div",{class:v(l(n).e("collapse-tags"))},[(u(!0),y(ue,null,ie(Z.value.slice(e.maxCollapseTags),(s,b)=>(u(),y("div",{key:b,class:v(l(n).e("collapse-tag"))},[(u(),_(l(Ne),{key:s.key,class:"in-tooltip",type:e.tagType,size:l(be),effect:e.tagEffect,hit:s.hitState,closable:s.closable,"disable-transitions":"",onClose:g=>se(s)},{default:p(()=>[z("span",null,D(s.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),e.filterable&&!l(T)?O((u(),y("input",{key:0,"onUpdate:modelValue":t=>S.value=t,type:"text",class:v(l(n).e("search-input")),placeholder:l(L)?"":l(me),onInput:t=>re(S.value,t),onClick:ce(t=>d(!0),["stop"]),onKeydown:oa(Ye,["delete"]),onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[na,S.value]]):U("v-if",!0)],2)):U("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[l(za),()=>d(!1),l(ke)]])]),content:p(()=>[O(x(l($a),{ref_key:"cascaderPanelRef",ref:f,modelValue:l(ae),"onUpdate:modelValue":t=>ta(ae)?ae.value=t:null,options:e.options,props:o.props,border:!1,"render-label":e.$slots.default,onExpandChange:Ge,onClose:t=>e.$nextTick(()=>d(!1))},{empty:p(()=>[W(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Se,!E.value]]),e.filterable?O((u(),_(l(Ve),{key:0,ref_key:"suggestionPanel",ref:A,tag:"ul",class:v(l(n).e("suggestion-panel")),"view-class":l(n).e("suggestion-list"),onKeydown:Xe},{default:p(()=>[ee.value.length?(u(!0),y(ue,{key:0},ie(ee.value,t=>(u(),y("li",{key:t.uid,class:v([l(n).e("suggestion-item"),l(n).is("checked",t.checked)]),tabindex:-1,onClick:s=>je(t)},[W(e.$slots,"suggestion-item",{item:t},()=>[z("span",null,D(t.text),1),t.checked?(u(),_(l(pe),{key:0},{default:p(()=>[x(l(ya))]),_:1})):U("v-if",!0)])],10,["onClick"]))),128)):W(e.$slots,"empty",{key:1},()=>[z("li",{class:v(l(n).e("empty-text"))},D(l(fe)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Se,E.value]]):U("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Ra=pa(Ka,[["__file","cascader.vue"]]);const ja=Pa(Ra);export{ja as E,Fa as a,Ma as c};
