import{cN as v}from"./index-1d9ecc32-D3TAVM0q.js";import{E as S,c as g}from"./index-Bnd3J9Vo.js";import{d as V,r as d,a as k,K as p,x as w,o as i,w as C,c as b,U as K,a1 as B,u as r,G as _,B as E}from"./app-KbY4rNOm.js";import"./strings-DZkl9vKu.js";import"./index-CW2eQrt2.js";import"./index-De5VwMBg.js";import"./isEqual-CVzOeViX.js";import"./index-o8O-vc3E.js";const F=V({__name:"remoteSearchSelect",props:{labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},initialValue:{default:null},placeholder:{type:String,default:"请输入"},modelValue:{type:[String,Number,Array]},onChoose:{type:[Function,null],default:null},handler:{type:[Function,null],default:null},requester:{type:[Function,null],default:null}},emits:["update:modelValue"],setup(o,{emit:c}){const a=o,f=c,u=d([]),n=d(!1),s=k({get:()=>a.modelValue||null,set:e=>{f("update:modelValue",e)}}),m=async e=>{if(e&&a.requester){n.value=!0;const l=await a.requester(e);n.value=!1,u.value=a.handler?a.handler(l):Array.isArray(l)?l:[]}else u.value=[]},h=e=>{try{if(a.onChoose){const l=u.value.find(t=>t[a.valueKey]===e);l&&a.onChoose(l)}}catch(l){console.warn("remoteSearchSelect module onChoose error:",l)}};return w(()=>a.initialValue,e=>{e&&m(e)},{immediate:!0}),(e,l)=>(i(),p(r(g),_({modelValue:r(s),"onUpdate:modelValue":l[0]||(l[0]=t=>E(s)?s.value=t:null),filterable:"",remote:"","reserve-keyword":"",placeholder:o.placeholder,onChange:h,"remote-method":m,loading:r(n)},e.$attrs),{default:C(()=>[(i(!0),b(K,null,B(r(u),(t,y)=>(i(),p(r(S),{key:y,label:t[o.labelKey],value:t[o.valueKey]},null,8,["label","value"]))),128))]),_:1},16,["modelValue","placeholder","loading"]))}}),P=v(F,[["__file","/home/runner/work/element-plus-formkit/element-plus-formkit/src/modules/remoteSearchSelect.vue"]]);export{P as default};
