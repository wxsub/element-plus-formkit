import{es as N,ex as $,cu as z,ey as S}from"./index-8684d22f-DPTaXNIo.js";import{h as j,i as G}from"./index-Bb96Xt-D.js";import{d as M,J as c,a as h,b as O,O as f,o as p,w as v,e as m,u as e,B as U,N as q,c as b,g as D,t as A,M as F,f as K,G as J}from"./app-CDhIi3XK.js";const L={key:0,class:"module-popover-loading"},R={class:"ellipsis"},T=M({__name:"popover",props:{modelValue:{default:null},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},loading:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(s,{emit:P}){var k;const i=((k=$("lang"))==null?void 0:k.name)==="zh-cn",a=s,_=P,w=c(),x=h(()=>Object.assign(w.props||{},{label:a.labelKey,value:a.valueKey})),t=h({get:()=>a.modelValue,set:l=>{_("update:modelValue",l)}}),B=h(()=>{try{return Array.isArray(a.options)&&a.options.length===0?c().placeholder||(i?"请选择":"Please select"):C()||c().placeholder||(i?"请选择":"Please select")}catch(l){return console.warn(l),c().placeholder||(i?"请选择":"Please select")}}),C=()=>{const{options:l=[],valueKey:o="id",labelKey:g="name"}=a,r=t.value,E=Array.isArray(r)?r.flat(1/0):[r],V=n=>n.reduce((y,d)=>(y.push(d),Array.isArray(d.children)&&d.children.length&&y.push(...V(d.children)),y),[]),u=V(l).filter(n=>E.includes(n[o])).map(n=>n[g]);return u.length?`${u.join(" | ")}${u.length>5?` +${u.length}`:""}`:""};return(l,o)=>{const g=O("el-icon");return p(),f(e(G),J({trigger:"click",disabled:s.loading},l.$attrs,{"popper-style":{padding:0},width:"auto"}),{reference:v(()=>[m("span",{class:q([{"module-popover-active":e(t)},"module-popover-context"])},[s.loading?(p(),b("span",L,[D(A(i?"正在加载":"Loading...")+" ",1),o[1]||(o[1]=m("i",{class:"el-icon-loading"},null,-1))])):(p(),b(F,{key:1},[m("span",R,A(e(B)),1),K(g,null,{default:v(()=>[K(e(S))]),_:1})],64))],2)]),default:v(()=>[m("div",null,[s.options.length===0?(p(),f(e(j),{key:0,"image-size":60})):(p(),f(e(z),{key:1,options:s.options,props:e(x),modelValue:e(t),"onUpdate:modelValue":o[0]||(o[0]=r=>U(t)?t.value=r:null)},null,8,["options","props","modelValue"]))])]),_:1},16,["disabled"])}}}),I=N(T,[["__file","/home/runner/work/element-plus-formkit/element-plus-formkit/src/modules/popover.vue"]]);export{I as default};
