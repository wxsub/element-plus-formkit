import{a1 as g,P as f,aM as h,cY as F}from"./index-65d7f57d-VFY6rFOd.js";import{l as x,s as A,r as C,x as E,z as _}from"./app-Dzg4KdFn.js";function D(l,{beforeFocus:n,afterFocus:a,beforeBlur:c,afterBlur:u}={}){const r=x(),{emit:v}=r,o=A(),i=g(),e=C(!1),d=t=>{h(n)&&n(t)||e.value||(e.value=!0,v("focus",t),a==null||a())},m=t=>{var s;h(c)&&c(t)||t.relatedTarget&&((s=o.value)!=null&&s.contains(t.relatedTarget))||(e.value=!1,v("blur",t),u==null||u())},b=t=>{var s,p;(s=o.value)!=null&&s.contains(document.activeElement)&&o.value!==document.activeElement||F(t.target)||i.value||(p=l.value)==null||p.focus()};return E([o,i],([t,s])=>{t&&(s?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1"))}),f(o,"focus",d,!0),f(o,"blur",m,!0),f(o,"click",b,!0),{isFocused:e,wrapperRef:o,handleFocus:d,handleBlur:m}}const k=l=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(l);function R({afterComposition:l,emit:n}){const a=C(!1),c=o=>{n==null||n("compositionstart",o),a.value=!0},u=o=>{var i;n==null||n("compositionupdate",o);const e=(i=o.target)==null?void 0:i.value,d=e[e.length-1]||"";a.value=!k(d)},r=o=>{n==null||n("compositionend",o),a.value&&(a.value=!1,_(()=>l(o)))};return{isComposing:a,handleComposition:o=>{o.type==="compositionend"?r(o):u(o)},handleCompositionStart:c,handleCompositionUpdate:u,handleCompositionEnd:r}}export{R as a,D as u};
