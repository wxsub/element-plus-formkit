import{eq as N,ev as $,cs as z,ew as S}from"./index-c6a0b456-CcMdfJ4o.js";import{h as j,i as q}from"./index-CLEC8J0W.js";import{d as G,J as c,a as h,b as M,O as f,o as p,w as v,e as m,u as e,B as O,N as U,c as b,g as D,t as A,M as F,f as w,G as J}from"./app-rgAAt8gT.js";const L={key:0,class:"module-popover-loading"},R={class:"ellipsis"},T=G({__name:"popover",props:{modelValue:{default:null},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},loading:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(s,{emit:K}){var k;const i=((k=$("lang"))==null?void 0:k.name)==="zh-cn",a=s,P=K,_=c(),B=h(()=>Object.assign(_.props||{},{label:a.labelKey,value:a.valueKey})),t=h({get:()=>a.modelValue,set:l=>{P("update:modelValue",l)}}),C=h(()=>{try{return Array.isArray(a.options)&&a.options.length===0?c().placeholder||(i?"请选择":"Please select"):E()||c().placeholder||(i?"请选择":"Please select")}catch(l){return console.warn(l),c().placeholder||(i?"请选择":"Please select")}}),E=()=>{const{options:l=[],valueKey:o="id",labelKey:g="name"}=a,r=t.value,x=Array.isArray(r)?r.flat(1/0):[r],V=n=>n.reduce((y,d)=>(y.push(d),Array.isArray(d.children)&&d.children.length&&y.push(...V(d.children)),y),[]),u=V(l).filter(n=>x.includes(n[o])).map(n=>n[g]);return u.length?`${u.join(" | ")}${u.length>5?` +${u.length}`:""}`:""};return(l,o)=>{const g=M("el-icon");return p(),f(e(q),J({trigger:"click",disabled:s.loading},l.$attrs,{"popper-style":{padding:0},width:"auto"}),{reference:v(()=>[m("span",{class:U([{"module-popover-active":e(t)},"module-popover-context"])},[s.loading?(p(),b("span",L,[D(A(i?"正在加载":"Loading...")+" ",1),o[1]||(o[1]=m("i",{class:"el-icon-loading"},null,-1))])):(p(),b(F,{key:1},[m("span",R,A(e(C)),1),w(g,null,{default:v(()=>[w(e(S))]),_:1})],64))],2)]),default:v(()=>[m("div",null,[s.options.length===0?(p(),f(e(j),{key:0,"image-size":60})):(p(),f(e(z),{key:1,options:s.options,props:e(B),modelValue:e(t),"onUpdate:modelValue":o[0]||(o[0]=r=>O(t)?t.value=r:null)},null,8,["options","props","modelValue"]))])]),_:1},16,["disabled"])}}}),I=N(T,[["__file","/home/runner/work/element-plus-formkit/element-plus-formkit/src/modules/popover.vue"]]);export{I as default};
