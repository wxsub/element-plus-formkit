import{O as ea,Q as aa,bi as ta,R as U,b9 as la,T as sa,d as Be,at as oa,U as _e,aK as na,bc as ra,bk as ia,r as c,a as r,bd as ua,bh as ca,aw as pa,b3 as da,Z as I,a8 as D,$ as fa,aY as va,ag as S,o as i,w as p,ah as L,ai as W,f as $,a7 as l,by as ga,a4 as q,an as Pe,a6 as v,c as y,al as ie,aE as ue,e as F,t as z,aj as ce,cg as ha,a5 as ma,aC as ba,aB as pe,bj as Ca,bf as ya,aA as ka,bN as Ea,af as Ta,b6 as m,dQ as wa,dR as Sa,dS as _a,a9 as Pa}from"./app-DCKji7m7.js";import{b as Va,a as $a,E as Na}from"./index-DMWwH15Q.js";import{E as xa}from"./index-B6csShxA.js";import{b as Ba,d as Ia,E as Ve,c as $e}from"./strings-BIW5SkOd.js";import{t as Ne,E as xe,C as Da}from"./index-lCg5Axqk.js";import{C as Ie,U as De}from"./index-0u5VigND.js";import{a as Fa}from"./index-BgfgPDmb.js";const za=aa({...Va,size:la,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:U(Function),default:(u,j)=>u.text.includes(j)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:U(Function),default:()=>!0},placement:{type:U(String),values:Ia,default:"bottom-start"},fallbackPlacements:{type:U(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ba.teleported,tagType:{...Ne.type,default:"info"},tagEffect:{...Ne.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...ta}),Ma={[De]:u=>!0,[Ie]:u=>!0,focus:u=>u instanceof FocusEvent,blur:u=>u instanceof FocusEvent,clear:()=>!0,visibleChange:u=>ea(u),expandChange:u=>!!u,removeTag:u=>!!u},Aa="ElCascader",Ka=Be({name:Aa}),Ra=Be({...Ka,props:za,emits:Ma,setup(u,{expose:j,emit:k}){const o=u,Fe={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:t}=e;["right","left","bottom","top"].includes(t)||a.arrow&&(a.arrow.x=35)},requires:["arrow"]}]},de=oa();let N=0,Q=0;const n=_e("cascader"),G=_e("input"),{t:fe}=na(),{form:ve,formItem:M}=ra(),{valueOnClear:ze}=ia(o),{isComposing:ge,handleComposition:V}=Fa({afterComposition(e){var a;const t=(a=e.target)==null?void 0:a.value;re(t)}}),Y=c(null),x=c(null),he=c(null),f=c(null),A=c(null),g=c(!1),Z=c(!1),E=c(!1),J=c(!1),K=c(""),_=c(""),P=c([]),X=c([]),ee=c([]),Me=r(()=>de.style),T=r(()=>o.disabled||(ve==null?void 0:ve.disabled)),me=r(()=>{var e;return(e=o.placeholder)!=null?e:fe("el.cascader.placeholder")}),Ae=r(()=>_.value||P.value.length>0||ge.value?"":me.value),R=ua(),be=r(()=>R.value==="small"?"small":"default"),w=r(()=>!!o.props.multiple),Ce=r(()=>!o.filterable||w.value),ye=r(()=>w.value?_.value:K.value),H=r(()=>{var e;return((e=f.value)==null?void 0:e.checkedNodes)||[]}),Ke=r(()=>!o.clearable||T.value||E.value||!Z.value?!1:!!H.value.length),O=r(()=>{const{showAllLevels:e,separator:a}=o,t=H.value;return t.length?w.value?"":t[0].calcText(e,a):""}),Re=r(()=>(M==null?void 0:M.validateState)||""),ae=r({get(){return $a(o.modelValue)},set(e){const a=e??ze.value;k(De,a),k(Ie,a),o.validateEvent&&(M==null||M.validate("change").catch(t=>ca()))}}),He=r(()=>[n.b(),n.m(R.value),n.is("disabled",T.value),de.class]),Oe=r(()=>[G.e("icon"),"icon-arrow-down",n.is("reverse",g.value)]),Ue=r(()=>n.is("focus",g.value||J.value)),ke=r(()=>{var e,a;return(a=(e=Y.value)==null?void 0:e.popperRef)==null?void 0:a.contentRef}),d=e=>{var a,t,s;T.value||(e=e??!g.value,e!==g.value&&(g.value=e,(t=(a=x.value)==null?void 0:a.input)==null||t.setAttribute("aria-expanded",`${e}`),e?(B(),D((s=f.value)==null?void 0:s.scrollToExpandingNode)):o.filterable&&ne(),k("visibleChange",e)))},B=()=>{D(()=>{var e;(e=Y.value)==null||e.updatePopper()})},te=()=>{E.value=!1},le=e=>{const{showAllLevels:a,separator:t}=o;return{node:e,key:e.uid,text:e.calcText(a,t),hitState:!1,closable:!T.value&&!e.isDisabled,isCollapseTag:!1}},se=e=>{var a;const t=e.node;t.doCheck(!1),(a=f.value)==null||a.calculateCheckedValue(),k("removeTag",t.valueByOption)},Le=()=>{if(!w.value)return;const e=H.value,a=[],t=[];if(e.forEach(s=>t.push(le(s))),X.value=t,e.length){e.slice(0,o.maxCollapseTags).forEach(h=>a.push(le(h)));const s=e.slice(o.maxCollapseTags),b=s.length;b&&(o.collapseTags?a.push({key:-1,text:`+ ${b}`,closable:!1,isCollapseTag:!0}):s.forEach(h=>a.push(le(h))))}P.value=a},Ee=()=>{var e,a;const{filterMethod:t,showAllLevels:s,separator:b}=o,h=(a=(e=f.value)==null?void 0:e.getFlattedNodes(!o.props.checkStrictly))==null?void 0:a.filter(C=>C.isDisabled?!1:(C.calcText(s,b),t(C,ye.value)));w.value&&(P.value.forEach(C=>{C.hitState=!1}),X.value.forEach(C=>{C.hitState=!1})),E.value=!0,ee.value=h,B()},We=()=>{var e;let a;E.value&&A.value?a=A.value.$el.querySelector(`.${n.e("suggestion-item")}`):a=(e=f.value)==null?void 0:e.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`),a&&(a.focus(),!E.value&&a.click())},oe=()=>{var e,a;const t=(e=x.value)==null?void 0:e.input,s=he.value,b=(a=A.value)==null?void 0:a.$el;if(!(!Ta||!t)){if(b){const h=b.querySelector(`.${n.e("suggestion-list")}`);h.style.minWidth=`${t.offsetWidth}px`}if(s){const{offsetHeight:h}=s,C=P.value.length>0?`${Math.max(h,N)-2}px`:`${N}px`;t.style.height=C,B()}}},qe=e=>{var a;return(a=f.value)==null?void 0:a.getCheckedNodes(e)},je=e=>{B(),k("expandChange",e)},Qe=e=>{if(!ge.value)switch(e.code){case m.enter:case m.numpadEnter:d();break;case m.down:d(!0),D(We),e.preventDefault();break;case m.esc:g.value===!0&&(e.preventDefault(),e.stopPropagation(),d(!1));break;case m.tab:d(!1);break}},Ge=()=>{var e;(e=f.value)==null||e.clearCheckedNodes(),!g.value&&o.filterable&&ne(),d(!1),k("clear")},ne=()=>{const{value:e}=O;K.value=e,_.value=e},Ye=e=>{var a,t;const{checked:s}=e;w.value?(a=f.value)==null||a.handleCheckChange(e,!s,!1):(!s&&((t=f.value)==null||t.handleCheckChange(e,!0,!1)),d(!1))},Ze=e=>{const a=e.target,{code:t}=e;switch(t){case m.up:case m.down:{e.preventDefault();const s=t===m.up?-1:1;wa(Sa(a,s,`.${n.e("suggestion-item")}[tabindex="-1"]`));break}case m.enter:case m.numpadEnter:a.click();break}},Je=()=>{const e=P.value,a=e[e.length-1];Q=_.value?0:Q+1,!(!a||!Q||o.collapseTags&&e.length>1)&&(a.hitState?se(a):a.hitState=!0)},Te=e=>{const a=e.target,t=n.e("search-input");a.className===t&&(J.value=!0),k("focus",e)},we=e=>{J.value=!1,k("blur",e)},Xe=pa(()=>{const{value:e}=ye;if(!e)return;const a=o.beforeFilter(e);da(a)?a.then(Ee).catch(()=>{}):a!==!1?Ee():te()},o.debounce),re=(e,a)=>{!g.value&&d(!0),!(a!=null&&a.isComposing)&&(e?Xe():te())},Se=e=>Number.parseFloat(_a(G.cssVarName("input-height"),e).value)-2;return I(E,B),I([H,T,()=>o.collapseTags],Le),I(P,()=>{D(()=>oe())}),I(R,async()=>{await D();const e=x.value.input;N=Se(e)||N,oe()}),I(O,ne,{immediate:!0}),fa(()=>{const e=x.value.input,a=Se(e);N=e.offsetHeight||a,va(e,oe)}),j({getCheckedNodes:qe,cascaderPanelRef:f,togglePopperVisible:d,contentRef:ke,presentText:O}),(e,a)=>(i(),S(l($e),{ref_key:"tooltipRef",ref:Y,visible:g.value,teleported:e.teleported,"popper-class":[l(n).e("dropdown"),e.popperClass],"popper-options":Fe,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${l(n).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:e.persistent,onHide:te},{default:p(()=>[L((i(),y("div",{class:v(l(He)),style:ma(l(Me)),onClick:()=>d(l(Ce)?void 0:!0),onKeydown:Qe,onMouseenter:t=>Z.value=!0,onMouseleave:t=>Z.value=!1},[$(l(xa),{ref_key:"input",ref:x,modelValue:K.value,"onUpdate:modelValue":t=>K.value=t,placeholder:l(Ae),readonly:l(Ce),disabled:l(T),"validate-event":!1,size:l(R),class:v(l(Ue)),tabindex:l(w)&&e.filterable&&!l(T)?-1:void 0,onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we,onInput:re},ba({suffix:p(()=>[l(Ke)?(i(),S(l(ce),{key:"clear",class:v([l(G).e("icon"),"icon-circle-close"]),onClick:pe(Ge,["stop"])},{default:p(()=>[$(l(Ca))]),_:1},8,["class","onClick"])):(i(),S(l(ce),{key:"arrow-down",class:v(l(Oe)),onClick:pe(t=>d(),["stop"])},{default:p(()=>[$(l(ya))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:p(()=>[q(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),l(w)?(i(),y("div",{key:0,ref_key:"tagWrapper",ref:he,class:v([l(n).e("tags"),l(n).is("validate",!!l(Re))])},[(i(!0),y(ie,null,ue(P.value,t=>(i(),S(l(xe),{key:t.key,type:e.tagType,size:l(be),effect:e.tagEffect,hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:s=>se(t)},{default:p(()=>[t.isCollapseTag===!1?(i(),y("span",{key:0},z(t.text),1)):(i(),S(l($e),{key:1,disabled:g.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:p(()=>[F("span",null,z(t.text),1)]),content:p(()=>[$(l(Ve),{"max-height":e.maxCollapseTagsTooltipHeight},{default:p(()=>[F("div",{class:v(l(n).e("collapse-tags"))},[(i(!0),y(ie,null,ue(X.value.slice(e.maxCollapseTags),(s,b)=>(i(),y("div",{key:b,class:v(l(n).e("collapse-tag"))},[(i(),S(l(xe),{key:s.key,class:"in-tooltip",type:e.tagType,size:l(be),effect:e.tagEffect,hit:s.hitState,closable:s.closable,"disable-transitions":"",onClose:h=>se(s)},{default:p(()=>[F("span",null,z(s.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),e.filterable&&!l(T)?L((i(),y("input",{key:0,"onUpdate:modelValue":t=>_.value=t,type:"text",class:v(l(n).e("search-input")),placeholder:l(O)?"":l(me),onInput:t=>re(_.value,t),onClick:pe(t=>d(!0),["stop"]),onKeydown:ka(Je,["delete"]),onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:Te,onBlur:we},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[Ea,_.value]]):W("v-if",!0)],2)):W("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[l(Da),()=>d(!1),l(ke)]])]),content:p(()=>[L($(l(Na),{ref_key:"cascaderPanelRef",ref:f,modelValue:l(ae),"onUpdate:modelValue":t=>ga(ae)?ae.value=t:null,options:e.options,props:o.props,border:!1,"render-label":e.$slots.default,onExpandChange:je,onClose:t=>e.$nextTick(()=>d(!1))},{empty:p(()=>[q(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Pe,!E.value]]),e.filterable?L((i(),S(l(Ve),{key:0,ref_key:"suggestionPanel",ref:A,tag:"ul",class:v(l(n).e("suggestion-panel")),"view-class":l(n).e("suggestion-list"),onKeydown:Ze},{default:p(()=>[ee.value.length?(i(!0),y(ie,{key:0},ue(ee.value,t=>(i(),y("li",{key:t.uid,class:v([l(n).e("suggestion-item"),l(n).is("checked",t.checked)]),tabindex:-1,onClick:s=>Ye(t)},[q(e.$slots,"suggestion-item",{item:t},()=>[F("span",null,z(t.text),1),t.checked?(i(),S(l(ce),{key:0},{default:p(()=>[$(l(ha))]),_:1})):W("v-if",!0)])],10,["onClick"]))),128)):q(e.$slots,"empty",{key:1},()=>[F("li",{class:v(l(n).e("empty-text"))},z(l(fe)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Pe,E.value]]):W("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Ha=sa(Ra,[["__file","cascader.vue"]]);const Ga=Pa(Ha);export{Ga as E,za as a,Ma as c};
